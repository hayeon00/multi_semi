<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org" lang="ko">
<head>
    <meta charset="UTF-8">
    <title>ì½”ìŠ¤ ë¦¬ë·° ë“±ë¡ | Travel Planing</title>
    <link th:href="@{/css/admin.css}" rel="stylesheet">
    <style>
        .review-form {
            background: #fff;
            padding: 30px;
            border-radius: 12px;
            box-shadow: 0 0 10px rgba(0,0,0,0.1);
            max-width: 700px;
            margin: auto;
        }

        .review-form h2 {
            text-align: center;
            margin-bottom: 20px;
            font-size: 22px;
            color: #2c3e50;
        }

        .form-group {
            margin-bottom: 18px;
        }

        label {
            display: block;
            margin-bottom: 6px;
            font-weight: 600;
            color: #34495e;
        }

        input[type="text"],
        textarea,
        select {
            width: 100%;
            padding: 12px;
            border-radius: 8px;
            border: 1px solid #ccc;
            font-size: 14px;
            background: #fdfdfd;
        }

        input[type="file"] {
            margin-top: 10px;
        }

        button {
            width: 100%;
            padding: 14px;
            background: #3498db;
            color: white;
            border: none;
            border-radius: 8px;
            font-size: 16px;
            cursor: pointer;
        }

        button:hover {
            background: #2980b9;
        }
    </style>
</head>
<body>
<header>
    <div class="logo">
        <img th:src="@{/images/logo.png}" alt="Logo">
        <span class="title">TRAVEL PLANING</span>
    </div>

    <nav class="admin-nav">
        <div class="welcome-text">ê´€ë¦¬ì ë‹˜ í™˜ì˜í•©ë‹ˆë‹¤.</div>
        <div class="menu-links">
            <a th:href="@{/}">Home</a>
            <a th:href="@{/mypage}">ë§ˆì´í˜ì´ì§€</a>
            <a th:href="@{/logout}">ë¡œê·¸ì•„ì›ƒ</a>
        </div>
    </nav>
</header>

<main>
    <div class="admin-container">
        <aside class="admin-sidebar">
            <h2 class="admin-title">ì½”ìŠ¤ ë¦¬ë·° ë“±ë¡</h2>
            <p class="admin-sub">ê´€ë¦¬ì ì „ìš© ë¦¬ë·° ë“±ë¡ í™”ë©´ì…ë‹ˆë‹¤.</p>
        </aside>

        <section class="admin-content">
            <div class="review-form">
                <h2>ğŸ“ ë¦¬ë·° ì‘ì„±</h2>
                <form id="reviewForm">
                    <input type="hidden" name="targetId" th:value="${courseId}" />
                    <input type="hidden" name="targetType" value="COURSE" />

                    <div class="form-group">
                        <label for="title">ì œëª©</label>
                        <input type="text" id="title" name="title" placeholder="ì œëª©ì„ ì…ë ¥í•˜ì„¸ìš”" required />
                    </div>

                    <div class="form-group">
                        <label for="content">ë‚´ìš©</label>
                        <textarea id="content" name="content" rows="5" placeholder="ë¦¬ë·° ë‚´ìš©ì„ ì…ë ¥í•˜ì„¸ìš”" required></textarea>
                    </div>

                    <div class="form-group">
                        <label for="rating">í‰ì </label>
                        <select id="rating" name="rating" required>
                            <option value="5">â˜…â˜…â˜…â˜…â˜… (5ì )</option>
                            <option value="4">â˜…â˜…â˜…â˜…â˜† (4ì )</option>
                            <option value="3">â˜…â˜…â˜…â˜†â˜† (3ì )</option>
                            <option value="2">â˜…â˜…â˜†â˜†â˜† (2ì )</option>
                            <option value="1">â˜…â˜†â˜†â˜†â˜† (1ì )</option>
                        </select>
                    </div>

                    <div class="form-group">
                        <label for="reviewImages">ì‚¬ì§„ ì—…ë¡œë“œ</label>
                        <input type="file" id="reviewImages" name="reviewImages" accept="image/*" multiple />
                    </div>

                    <button type="submit">ë¦¬ë·° ë“±ë¡</button>
                </form>
            </div>
        </section>
    </div>
</main>

<footer>
    &copy; 2025 Travel Planing. All rights reserved.
</footer>

<script th:src="@{/js/common.js}"></script>

<script>
    document.getElementById("reviewForm").addEventListener("submit", async function (e) {
        e.preventDefault();
        const formData = new FormData(e.target);

        const response = await fetchWithRefresh("/review/view/regist/course", {
            method: "POST",
            body: formData,
            credentials: "include"
        });

        if (response.ok) {
            alert("ë¦¬ë·°ê°€ ë“±ë¡ë˜ì—ˆìŠµë‹ˆë‹¤.");
            window.location.href = "/review/view/course/" + formData.get("targetId");
        } else {
            alert("ë“±ë¡ ì‹¤íŒ¨ âŒ");
        }
    });
</script>
</body>
</html>
